import {
    IconBrandGithubFilled,
    IconExternalLink,
    IconEye,
    IconRefresh,
    IconThumbDownFilled,
    IconThumbUpFilled,
} from "@tabler/icons-react";
import {type NextPage} from "next";
import {Inter} from "next/font/google";
import localFont from "next/font/local";
import Head from "next/head";
import Link from "next/link";
import {useAutoAnimate} from "@formkit/auto-animate/react";
import {createProxySSGHelpers as createServerSideHelpers} from "@trpc/react-query/ssg";
import classNames from "classnames";
import Image from "next/image";
import {useEffect, useState} from "react";
import SuperJSON from "superjson";
import {appRouter} from "~/server/api/root";
import {api} from "~/utils/api";
import {RadioGroup} from "@headlessui/react";

const inter = Inter({
    variable: "--font-inter",
    subsets: ["latin", "cyrillic"],
});

const origintech = localFont({
    src: "../assets/origintech.ttf",
    variable: "--font-origintech",
});

function shortenNameLength(name: string) {
    if (name.length > 20) {
        return name.slice(0, 20) + "...";
    }
    return name;
}

const relativeFormat = new Intl.RelativeTimeFormat("bg", {
    numeric: "auto",
});

const YtThumbnail = (video: { id: string; title: string }) => {
    const [resolution, setResolution] = useState("maxresdefault");

    return (
        <Image
            src={`https://i.ytimg.com/vi/${video.id}/${resolution}.jpg`}
            alt={video.title}
            fill
            style={{objectFit: "contain"}}
            onError={() => setResolution("default")}
        />
    );
};

const RelativeDate = ({date}: { date: Date }) => {
    const now = Date.now();
    const [, setFakeNow] = useState(now);
    const diff = date.getTime() - now;
    const diffInMinutes = Math.min(Math.round(diff / 1000 / 60), 0);

    useEffect(() => {
        const interval = setInterval(() => {
            setFakeNow(Date.now());
        }, 1000 * 30);
        return () => clearInterval(interval);
    }, [date]);

    return (
        <time dateTime={date.toISOString()}>
            {diffInMinutes > 0
                ? relativeFormat.format(diffInMinutes, "minute")
                : "преди малко"}
        </time>
    );
};

const SortByRadio = ({
                         value,
                         onChange,
                     }: {
    value: "views" | "likes";
    onChange: (value: "views" | "likes") => void;
}) => {
    const options = [
        {
            value: "views",
            label: "Гледания",
            icon: IconEye,
        },
        {
            value: "likes",
            label: "Харесвания",
            icon: IconThumbUpFilled,
        },
    ];
    return (
        <RadioGroup value={value} onChange={onChange}>
            <RadioGroup.Label className="sr-only">Сортирай по</RadioGroup.Label>
            <div className="flex items-center">
                {options.map((opt) => (
                    <RadioGroup.Option
                        key={opt.value}
                        value={opt.value}
                        className="relative flex cursor-pointer items-center px-2 py-1 text-lg font-medium shadow-sm first:rounded-s-md last:rounded-e-md focus:outline-none  ui-checked:bg-white ui-not-checked:border-gray-700 ui-not-checked:bg-white/10"
                    >
            <span
                className="mt-0.5 flex items-center justify-center"
                aria-hidden="true"
            >
              <opt.icon
                  className="ui-checked:text-black ui-not-checked:text-white"
                  width="2em"
              />
            </span>
                        <span className="sr-only">{opt.label}</span>
                    </RadioGroup.Option>
                ))}
            </div>
        </RadioGroup>
    );
};

const Home: NextPage = () => {
    const videos = api.videos.get.useQuery(undefined, {
        refetchInterval: 1000 * 60 * 2,
    });
    const [animationParent] = useAutoAnimate();
    const [sortBy, setSortBy] = useState<"views" | "likes">("views");
    const ranks = new Set<number>();
    const sortedVideos = videos.data
        ?.sort((a, b) => {
            if (sortBy === "views") {
                return (
                    b.views - a.views ||
                    b.likes - a.likes ||
                    a.title.localeCompare(b.title)
                );
            } else {
                return (
                    b.likes - a.likes ||
                    b.views - a.views ||
                    a.title.localeCompare(b.title)
                );
            }
        })
        .map((video) => {
            const rank =
                new Set(
                    videos.data
                        .filter((v) => v[sortBy] > video[sortBy])
                        .map((v) => v[sortBy])
                ).size + 1;
            const isFirstInRank = !ranks.has(rank);
            if (isFirstInRank) {
                ranks.add(rank);
            }
            return {
                ...video,
                rank,
                isFirstInRank,
            };
        });

    return (
        <>
            <Head>
                <title>TUES Fest 2024 YouTube Video Leaderboard</title>
                <meta
                    name="description"
                    content="Класация на YouTube видеата на проектите от TUES Fest 2024. Защото всичко трябва да бъде състезание."
                />
                <link rel="icon" href="/favicon.ico"/>
            </Head>
            <main
                className={classNames(
                    "flex min-h-screen flex-col items-center bg-black font-sans",
                    inter.variable,
                    origintech.variable
                )}
            >
                <div className="container flex flex-col items-center gap-12 px-4 py-16 ">
                    <header className="flex flex-col items-center gap-3 text-center">
                        <h1 dangerouslySetInnerHTML={{
                            __html: `<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2" viewBox="0 0 2243 741" class="relative z-20 w-full"><path d="M613.17 993.08c.59 1.01.49.22 0 0ZM667.27 763.19c-.25-.22-.48-.21-.12.06.06.04.13.08.19.12a.894.894 0 0 1-.07-.18ZM963 645.53c.25.05.27.04 0 0ZM667.5 763.48c-.06-.04-.11-.07-.16-.11a1.952 1.952 0 0 0 .16.11ZM1012.31 994.47c-.08.11-.13.21-.09.24.01.01.05-.08.09-.24ZM667.58 763.53c-.02-.01-.04-.03-.06-.04.03.02.04.03.06.04ZM832.68 642.85c.06-.09.12-.17.18-.22-.07.05-.13.12-.18.22Z" style="fill:#ddd;fill-rule:nonzero" transform="translate(-381.72 -582.769)"></path><path d="M1011.75 971.28c-.25-.79-.3-1.52-.21-2.19-23.98-9.89-46.11-24.24-64.27-42.77-30.78-31.41-47.6-73.53-47.88-117.43-.26-42.11 12.95-84.14 41.08-115.92 9.27-10.47 19.91-19.58 31.46-27.39v-.01c-.98-4.96-.68-10.69-2.55-15.44-1.17-2.97-3.4-3.98-6.39-4.6-.18-.03-.46-.06-.87-.1-.84-.08-1.68-.17-2.51-.25-2.43-.22-4.87-.39-7.3-.56-27.55-1.84-55.27-2.6-82.88-2.44-10.64.06-23.44.05-32.93 1.43-1.34.2-2.66.46-3.98.78.07 4.11 2.38 14.08 3.27 17.52 4.73.61 9.45 1.32 14.07 2.35 2.25.5 4.69 1.07 6.14 3 1.98 2.63.6 6.34.02 9.27-2.76 14-5.55 27.99-8.32 41.99.68 5.93 1.35 11.85 2.03 17.78 4.95 43.37 9.9 86.73 14.84 130.1.33 2.91-2.56 4.73-5 5-11.56 1.26-23.63 2.21-35.21.85-4.35-.51-8.93-.94-10.19-5.84-.84-3.26-.43-6.99-.19-10.3 2-26.76 7.6-53.48 12.46-79.83 3.59-19.49 7.36-38.95 11.2-58.4-.08-1 .11-1.83.49-2.49 2.51-12.69 5.03-25.38 7.56-38.06.24-1.19.44-2.39.66-3.6-1.06-.21-2.12-.4-3.18-.58-10.05-1.7-20.22-2.81-30.33-4.05-19.9-2.43-40.31-4.06-60.06-8 1.56 4.67 3.1 9.34 4.63 14.02 2.9 8.89 5.75 17.81 8.38 26.79 1.11 3.78 4.23 10.52 2.11 14.39-1.89 3.45-7.99 5.33-11.25 6.88-8.18 3.89-16.45 7.59-24.73 11.27-4.31 1.92-8.64 3.81-12.96 5.72.09.44.13.92.09 1.44-2.11 30.24-6.78 60.46-10.5 90.55 4.2 10.52 8.33 21.06 12.43 31.61 7.53 19.41 14.95 38.86 22.11 58.41 2.01 5.48 4.03 10.96 5.87 16.49 1.34 4.03 1.83 7.35-2.03 10.24-4.31 3.23-9.7 5.28-14.57 7.45-9.13 4.07-18.38 7.86-27.65 11.59-4.66 1.88-9.34 3.72-14.02 5.56-.52 4.55-.98 9.57-.44 13.9 14.07 1.09 28.29 1.3 42.37 1.92 61.24 2.69 122.52 5.01 183.81 6.12 25.25.46 50.58.92 75.82-.02 3.96-.15 7.92-.33 11.87-.65 1.53-.12 3.06-.27 4.58-.44.27-.03.44-.05.56-.06.06-.01.16-.03.34-.06.54-.09 1.09-.17 1.63-.28.43-.09.89-.24 1.34-.38.49-2.06 1.37-6.21 1.39-6.75.1-2.54-.06-5.11-.42-7.62-.4-2.66-.98-5.34-1.79-7.91Z" style="fill:#fff;fill-rule:nonzero" transform="translate(-381.72 -582.769)"></path><path d="M831.91 644.53c-.08.02-.16.04-.21.05.01.32.09.22.21-.05ZM613.08 992.93c.02.03.04.07.06.1.01.01.01.02.02.03.54.16.34.05-.08-.13ZM711.45 582.9c-.24-.34.01.1 0 0Z" style="fill:#ddd;fill-rule:nonzero" transform="translate(-381.72 -582.769)"></path><path d="M734.8 944.22c1.45-.71 2.88-1.47 4.28-2.26-1.17-2.9-1.83-6.52-2.78-9.16-2.59-7.22-5.25-14.42-7.94-21.6-7.57-20.27-15.32-40.47-23.24-60.6-1.87-4.75-3.74-9.5-5.63-14.24-.66-.65-1.08-1.57-1.1-2.74-5.64-14.14-11.39-28.25-17.45-42.21-2.94-6.78-5.92-13.56-9.24-20.18-1.07-2.13-2.15-4.27-3.41-6.31-.26-.42-.53-.84-.8-1.26-.07-.11-.12-.2-.16-.27-.08-.05-.14-.1-.19-.13-.18-.12-.34-.25-.49-.39-11.28 4.84-22.57 9.66-33.86 14.46-5.86 2.49-10.95-6.13-5.05-8.63 16.33-6.94 32.64-13.93 48.93-20.96 22.66-9.78 45.34-19.54 67.76-29.85 3.47-1.6 6.94-3.2 10.36-4.89.83-.41 1.99-1.23 3.14-1.92-.75-2.96-1.63-5.9-2.51-8.83-4.52-15.16-9.42-30.23-14.56-45.21-.27-.48-.45-1.01-.54-1.55-2.62-7.63-5.3-15.23-8.03-22.82-4.09-11.36-8.26-22.72-12.97-33.85-1.66-3.92-3.38-7.83-5.36-11.59-.52-.98-1.07-1.95-1.64-2.9-7.57 2.58-15.11 5.22-22.65 7.88-45.78 16.17-91.26 33.22-136.37 51.19-58.09 23.14-115.74 47.71-171.58 75.89 16.83 44.5 35.1 88.5 54.09 132.12 2.31-.9 4.62-1.8 6.93-2.72 40.46-16.03 81.17-32.5 119.65-52.92 5.69-3.02 10.73 5.62 5.05 8.63-10.58 5.62-21.38 10.81-32.25 15.84 3.84 8.54 7.67 17.08 11.49 25.63 20.12 44.97 39.25 90.45 60.23 135.03 1.65 3.51 3.28 7.07 5.21 10.44 4-1.51 8.49-2.44 12.44-3.81 8.9-3.09 17.75-6.33 26.59-9.61 20.78-7.71 41.49-15.65 61.98-24.13 7.28-3.04 14.58-6.1 21.67-9.57Z" style="fill:#fff;fill-rule:nonzero" transform="translate(-381.72 -582.769)"></path><path d="M997.87 1193.36s-.03.12-.06.25c2.18-1.36-.65-.57.06-.25ZM997.79 1193.72c.08-.08.09-.12.02-.09 0 .03-.01.06-.02.09ZM849.18 674.38c.25.12.89.2 0 0Z" style="fill:#ddd;fill-rule:nonzero" transform="translate(-381.72 -582.769)"></path><path d="M1164.46 965.75c19.51-4.91 38.63-11.65 56.43-21.09 10.7-5.67 21.05-12.24 30.18-20.23 2.32-2.03 4.57-4.14 6.69-6.39-2.23-3.52-4.46-7.04-6.69-10.55-13-20.45-26.04-40.87-39.23-61.21-6.31-9.73-12.64-19.44-19.09-29.08-2.41-3.6-4.83-7.19-7.31-10.74-.91-1.3-1.83-2.58-2.76-3.86-15.67 1.45-31.34 2.9-47.01 4.34-15.59 11.66-32.53 21.97-51.17 27.93-26.37 8.44-61.83 6.03-79.13-18.77-2.37-3.4.89-7.21 4.32-7.52l36.03-3.33c28.82-2.66 57.64-5.33 86.46-7.99 1.02-.5 2.01-.55 2.89-.27l33.08-3.06c5.15-.48 10.29-.95 15.44-1.43.79-.33 1.65-.43 2.5-.23 17.18-1.59 34.35-3.17 51.53-4.76.25-1.17.5-2.35.67-3.54 1.64-10.99-.37-25.43-3.96-37.18-6.98-22.86-20.19-45.87-36.39-63.38-25.52-27.58-63.64-38.4-100.12-40.45a253.85 253.85 0 0 0-39.86.9c-4.93.5-6.77.71-11.45 1.52-15.2 2.63-30.16 7.77-44.09 14.33-27.46 12.92-51.89 32.4-68.31 58.15-22.46 35.23-29.7 80.63-21.81 121.45 7.75 40.06 31.18 75.26 64.22 99.02 33.3 23.94 74.15 36.49 115.04 37.04 24.5.34 49.2-3.64 72.9-9.62Zm-136.13-193.77c9.23-23.71 42.8-30.89 64.88-23.4 13.66 4.63 25.73 16.5 29.29 30.76.83 3.34-1.56 6.08-4.82 6.33-.31.02-.63.04-.94.07-28.49 2.6-57.09 4.33-85.61 6.49a5.15 5.15 0 0 1-1.7-.14c-1.53-.31-2.81-1.41-3.12-3.53-.81-5.57-.01-11.36 2.02-16.58Z" style="fill:#fff;fill-rule:nonzero" transform="translate(-381.72 -582.769)"></path><path d="M997.77 1193.64c.01-.1.02-.13 0 0ZM741.27 940.7c.26-.17.18-.16 0 0ZM1816.13 622.38c0-.06-.01-.1-.01-.14-.02-.02-.03-.04-.05-.06.01.09.02.19.06.2ZM1810.43 739.41c-.01.01-.02.03-.04.05.01-.02.02-.03.04-.05ZM1816.08 622.12c-.19-.29-.52-.62 0 .06a.064.064 0 0 1 0-.06ZM1808.64 741.68c-.22.34-.12.89 0 0ZM2303.65 607.95c-.07-.05-.24-.03-.3-.09.22.25.52.34.85.34-.21-.07-.41-.15-.55-.25ZM2307.63 606.99c-.05.17-.06.24 0 0ZM1653.09 769.06c.17-.2.2-.38-.06-.5-.01-.01.02.19.06.5ZM2307.94 606.39l-.04.04c.15-.1.23-.15.04-.04ZM2288.95 754.59c0 .01 0 .01 0 0 .02.03.03.05.05.08a.218.218 0 0 1-.05-.08Z" style="fill:#ddd;fill-rule:nonzero" transform="translate(-381.72 -582.769)"></path><path d="M1529.83 754.07c6.23 32.12 12.47 64.23 18.8 96.33 5.62 28.51 11.25 57.01 17.21 85.45 1.85 8.81 3.69 17.63 5.77 26.39.41 1.74.85 3.46 1.31 5.19 26.18-2.73 52.18-7.09 78.08-11.81 11.4-2.08 23.13-3.86 34.28-7.13-1.2-5.38-2.64-10.7-4.01-16.04-3.98-15.48-8.12-30.97-11.19-46.66-1-5.15-2.32-10.69-2.05-15.97.26-5.03 2.87-7.13 7.58-7.74 19.6-2.53 39.47-3.98 59.12-6.55.96-.45 2.08-.59 3.17-.42 6.22-.85 12.41-1.82 18.57-2.99.09-.02.18-.04.27-.07.58-5.48 1.19-10.96 1.77-16.45 1.67-15.73 3.35-31.5 4.19-47.31.15-2.86.28-5.73.27-8.59 0-.27-.02-.53-.02-.8-.71.11-1.42.21-2.12.33-13.92 2.22-27.82 4.65-41.72 7.01-15.44 2.62-30.88 5.26-46.36 7.69-4.96.78-9.92 1.58-14.91 2.15-.97.11-2 .3-2.98.23-1.42-.11-2.73-.48-3.76-1.52-.7-.7-.87-1.38-1.3-2.23.01.01-.12-.44-.21-.81v-.01c-2.79-7.92-13.42-27.68.07-30.94 9.13-2.21 18.89-2.76 28.19-3.87 24.33-2.9 48.7-5.5 73.03-8.41.84-.4 1.71-.48 2.54-.31 6.54-.79 13.09-1.59 19.62-2.44 11.06-1.43 22.27-2.7 33.16-5.17.88-.2 1.76-.42 2.62-.67l.09-.84c.21-2.14.41-4.28.6-6.42 2.72-30.36 5.08-60.82 6.38-91.28.23-5.29.46-10.61.36-15.91 0-.08-.01-.16-.01-.23-.71-.01-1.41-.02-2 .03-3.05.29-7.02.79-9.42 1.11-23.19 3.11-48.02 7.48-71.69 11.63-32.46 5.69-64.86 11.67-97.22 17.91-28.59 5.51-57.17 11.14-85.6 17.43-9.19 2.03-18.39 4.09-27.48 6.54-2.32.62-4.62 1.31-6.91 2.04.38 1.96.64 3.95 1.01 5.81 4.37 22.08 8.61 44.21 12.9 66.32Z" style="fill:url(#a);fill-rule:nonzero" transform="translate(-381.72 -582.769)"></path><path d="M1246.59 793.48c-.4 2.27-2.78 3.48-4.82 3.67l-18.81 1.74c2.46 18.34 10.62 35.25 25.21 47.14 10.66 8.68 24.37 14.54 38.05 16.1 7.01.8 14.2.22 21.22-.14 6.64-.34 13.26-.87 19.77-2.24 16.07-3.38 31.5-10.23 46.95-15.64 19.67-6.89 57.87-19.23 67.99 8.29 9.32 25.34-29.7 34.23-46.35 36.61-20.86 2.98-49.02-.73-60.33-20.98-12.3 3.26-24.99 3.97-37.69 4.33-11.58.33-22.69-1.37-33.5-5.67-1.09-.43-2.17-.9-3.25-1.37-3.78 7.15-7.53 14.33-11.21 21.53 6.17 9.71 12.33 19.44 18.48 29.17.86 1.36 1.02 3.71 0 5.05-.91 1.18-1.84 2.31-2.85 3.41-9.31 10.15-20.71 18.46-32.91 25.4 22.66 12.47 48.56 20.6 73.57 26.07 38.38 8.4 77.27 7.7 115.38-1.82 29.49-7.37 57.9-20.45 79.15-42.67 22.8-23.84 38.16-57.48 33.84-90.86-3.85-29.72-23.33-62.65-53.35-71.93-11.03 7.63-22.05 15.26-33.08 22.89-1.75 1.21-4.66.74-6.06-.78-5.78-6.28-12.12-12.16-18.82-17.59-5.81 3.1-12.42 5.23-18.42 7.68-17.58 7.16-35.47 15.78-54 20.06-10.89 2.51-24.07 3.77-33.8-2.95-9.46-6.53-12.26-18.29-11.22-29.18 2.16-22.59 24.32-32.77 44.56-34.87 21.68-2.24 42.36 6.35 60.3 17.87 12.76 8.2 25 17.96 35.61 28.91 1.87-1.29 3.74-2.59 5.6-3.88 20.56-14.22 41.11-28.45 61.67-42.67.75-.52 1.48-.78 2.19-.86-.76-3.91-1.52-7.82-2.27-11.73-1.89-9.72-3.77-19.44-5.68-29.16-.13-.67-.27-1.34-.4-2.01-.12-.1-.23-.21-.35-.32-8.49-8.76-18.53-16.26-28.68-22.94-19.44-12.8-41.05-22.52-64.06-26.62-14.48-2.58-29.42-2.32-44.07-1.69-13.61.58-27.2 1.95-40.59 4.49-18.34 3.47-36.71 8.88-52.99 18.21-19.77 11.34-37.14 30.54-45.9 51.7 9.48 17.23 16.7 36.19 18.03 55.95.54 8.35-.67 16.14-2.11 24.3Z" style="fill:#fff;fill-rule:nonzero" transform="translate(-381.72 -582.769)"></path><path d="M1762.75 775.55c-.09.01-.05.09.09.21-.01-.16-.04-.21-.09-.21ZM1678.01 869.63c.01-.09.01-.12 0 0Z" style="fill:#ddd;fill-rule:nonzero" transform="translate(-381.72 -582.769)"></path><path d="M1293.75 1161.2c-1.36-5.23-2.79-10.46-4.64-15.54-.66-1.8-.81-2.09-1.38-3.3-.12.02-.25.05-.37.08-2.26.49-4.52.92-6.79 1.35-6.67 1.28-13.35 2.5-20.03 3.7-9.64 1.74-19.28 3.45-28.93 5.14-6.38 1.11-8.67-7.33-2.66-9.64 5.21-2 13.13-6.82 17.67-12.32-.1-3.63-.05-7.27.06-10.88.84-26.55 6.35-53.56 18.78-77.2.49-.94 1-1.87 1.52-2.79-.45-.39-.86-.9-1.19-1.55-7.45-14.83-18.23-27.52-32.21-36.57-23.09-14.93-51.4-19.52-78.49-18.72-4.73.14-9.45.45-14.16.94-3.72.39-4.28.47-7.49.99-4.81.77-6.62.86-11.32 1.68-33.21 5.74-66.59 19.07-91.93 41.7-28.33 25.31-38.26 62.25-37.11 99.25.19 5.97.61 11.97 1.49 17.89.39 2.59 1.48 5.51 1.99 8.23.09 0 .18 0 .26-.01 4.04-.35 7.52-.97 11.94-1.71 25.97-4.37 51.98-9.87 77.37-16.89 4.53-1.25 9.06-2.56 13.48-4.2.62-.23.92-.42 1.19-.59 0-.02-.01-.04-.01-.05-1.9-13.01 6.14-28.02 19.01-31.79 17.19-5.03 35.71 7.63 32.42 26.56-1.2 6.88-5.46 13.21-9.52 18.72-4.56 6.2-9.61 12.02-14.9 17.6-2.46 2.59-5.36 6.66-8.83 7.96-1.52.57-3.31.75-4.89 1.1-10.2 2.3-20.41 4.58-30.62 6.85-26.09 5.79-52.19 11.81-78.48 16.67-2.33.43-4.88 1.08-7.34 1.38-.01.26-.01.52-.02.78-.17 10.46 2.1 21.16 3.94 31.4 4.17 23.27 8.65 46.99 15.43 69.68.22-.03.44-.06.66-.1 6.26-1 12.48-2.19 18.7-3.4 21.85-4.26 43.63-8.88 65.41-13.52 53.14-11.32 106.21-22.98 159.26-34.73 14.84-3.29 29.68-6.58 44.52-9.89.22-.05.52-.15.85-.26.01-.27.03-.53.03-.8.12-10.78-2.08-21.77-3.94-32.34-2.39-13.72-5.22-27.39-8.73-40.86Z" style="fill:#fff;fill-rule:nonzero" transform="translate(-381.72 -582.769)"></path><path d="M1867.96 964.67c.01.03.01.05.01.08 0-.03-.01-.05-.01-.08Z" style="fill:#ddd;fill-rule:nonzero" transform="translate(-381.72 -582.769)"></path><path d="M1867.94 964.47c0 .03 0 .07.01.1 0 .03.01.06.01.1 0 0 .01 0 .01-.01l-.03-.19ZM2060.32 1234.58c0-.01-.04.11-.09.3.11-.02.15-.08.09-.3Z" style="fill:#ddd;fill-rule:nonzero" transform="translate(-381.72 -582.769)"></path><path d="M1974.71 946.93c-1.43-3.76-1.59-4.35-3.1-7.45-.23-.47-.47-.93-.72-1.38-.45.03-.91.05-1.36.09-1.62.15-3.48.46-5.82.86-6.82 1.18-13.6 2.63-20.36 4.15-16.67 3.74-33.26 7.93-49.68 12.68-6.36 1.84-12.72 3.74-18.95 5.98-2.43.87-4.12 1.45-5.96 2.37-.26.13-.53.29-.8.45.04.25.08.48 0 .09v.01c.31 2.01.74 4 1.18 5.99 1.38 6.24 3.02 12.43 4.66 18.6 4.26 16.04 8.8 32.01 13.14 48.04 3.14 11.59 6.76 23.33 8.49 35.24.6 4.11.73 7.67-3.25 10.12-6.17 3.8-13.73 6.1-20.53 8.47-7.03 2.45-15.12 5.7-22.69 5.69-4.32-.01-6.57-2.06-8.24-5.76-4.6-10.23-7.2-21.57-10.17-32.34-7.7-27.97-14.29-56.23-21.94-84.21-.09-.34-.2-.68-.29-1.02-1.57.23-3.17.38-4.5.64-14.28 2.84-28.56 5.72-42.8 8.73-14.55 3.08-29.18 6.1-43.53 10.07-2.05.57-4.07 1.19-6.09 1.85.05.2.08.39.13.59 5.65 22.73 13.86 45 21.26 67.19 14.75 44.23 29.9 88.34 45.22 132.37 4.46-1.32 8.91-2.63 13.37-3.94 29.7-8.69 59.43-17.32 89.38-25.14 9.55-2.49 19.65-5.92 29.55-6.62 8.15-.58 9.6 8.62 11.7 14.8 9.79 28.8 17.67 58.3 28.65 86.69 1.54 3.97 3.07 8.07 5.33 11.72.72-.12 1.62-.33 2.24-.45 13.19-2.67 26.11-7.31 38.82-11.66 15.26-5.22 30.46-10.73 45.34-16.97 5.02-2.11 10.09-4.26 14.85-6.91.49-.27.97-.55 1.44-.84-1.31-3.95-1.79-8.74-2.78-12.55-2.53-9.71-5.14-19.4-7.77-29.08-16.43-60.44-33.49-120.73-51.71-180.65-6.78-22.28-13.4-44.75-21.71-66.51Z" style="fill:#fff;fill-rule:nonzero" transform="translate(-381.72 -582.769)"></path><path d="M2565.37 837.31c-.11 0-.18.3 0 0ZM1956.37 1273.15c.05.06.11.16.13.19.42.21 1.24.35-.17-.25.01.01.03.04.04.06Z" style="fill:#ddd;fill-rule:nonzero" transform="translate(-381.72 -582.769)"></path><path d="M1956.5 1273.34c-.01-.02-.05-.07-.13-.19-.02-.02-.03-.04-.04-.03-.07.06.02.14.17.22ZM1709.54 995.53c-.7.26-.28.51 0 0ZM1954.83 1272.57c.02.08.21.09.49.07-.29-.12-.53-.21-.49-.07Z" style="fill:#ddd;fill-rule:nonzero" transform="translate(-381.72 -582.769)"></path><path d="M2301.76 944.77c-5.8-2.44-3.62-8.48-1.93-12.95 6.58-17.41 15.4-34.1 23.71-50.72 8.9-17.8 17.98-35.51 27.16-53.17-3.36-16.82-11.11-32-24.34-43.26-9.47-8.06-21.08-13.47-33.05-16.63-3.38-.89-6.8-1.59-10.25-2.13-.26-.04-.41-.06-.48-.08-.1-.01-.26-.03-.52-.05l-1.17-.12c-.32-.04-.65-.04-.98-.08-11.21-1.4-21.82-2.17-33.06-.32-10.21 1.68-20.14 4.65-29.9 8.02-16.44 5.68-34.93 15.48-52.82 13.68-11.74-1.18-22-8.48-26.09-19.68-2.05-5.61-1.57-12.41-.63-18.17 2.41-14.72 12.69-25.61 26.7-30.25 22.25-7.38 41.43 7.78 50.71 26.98 11.19-4.98 22.4-9.92 33.63-14.8 8.53-3.7 17.06-7.4 25.67-10.92 1.7-.69 4.52-2.16 7.27-2.9 1.5-15.66 3.29-31.29 5.28-46.89.52-4.13 1.05-8.27 1.59-12.4-.04-.05-.08-.1-.14-.16-25.27-30.22-66.28-41.72-104.48-39.86-32.61 1.59-66.14 10.92-92.98 29.93-19.88 14.09-35.31 33.82-44.89 56.18-16.44 38.36-19.73 90.65 18.74 117.33 26.45 18.35 59.34 16.71 89.91 13.57 14.98-1.54 29.88-3.78 44.85-5.44 10.54-1.17 21.9-2.67 32.38-.27 12.45 2.84 25.98 10.62 29.43 23.8 1.06 4.06 1.22 8.84-.6 12.72-2.48 5.27-8.28 8.27-13.46 10.27-16.75 6.46-35.38 2.88-50.42-6.23-10.83-6.56-16.2-16.82-22.81-27.1-12.36 1.63-25.04 3.3-37.72 4.05-3.1 2.42-6.2 4.84-9.3 7.27-22.13 17.29-44.26 34.57-66.39 51.86 3.71 6.37 8.2 12.39 12.85 18.02 11.12 13.47 24.24 25.33 39.21 34.38 21.31 12.87 45.34 18.24 69.96 20.23 26.09 2.11 52.6.32 77.97-6.26 18.76-4.87 37.4-12.38 53-24.07-.51-.15-1.02-.3-1.52-.44-3.29-.96-6.93-1.62-10.09-2.94Z" style="fill:url(#b);fill-rule:nonzero" transform="translate(-381.72 -582.769)"></path><path d="M1710.98 992.94c.16-.36.2-.52-.05-.22.01.08.03.15.05.22ZM2305.1 935.19c-.19-.1-.36-.12-.49-.01.06-.05.24-.04.49.01Z" style="fill:#ddd;fill-rule:nonzero" transform="translate(-381.72 -582.769)"></path><path d="M2050.41 901.04c3.32-2.6 6.65-5.19 9.97-7.79l5.19-4.05c-1.69-3.24-3.39-6.48-5.08-9.71-11.37-21.74-22.75-43.48-34.12-65.22-21.37.18-42.74.37-64.11.55-.35.8-.93 1.55-1.79 2.16-20.31 14.35-46.81 25.84-71.51 15.94-9.65-3.87-19.14-10.78-24.69-19.77-2.02-3.27.61-7.49 4.32-7.52 29.82-.26 59.65-.51 89.47-.77 23.74-.2 47.48-.41 71.22-.61.32-.03.64-.04.95-.01 1.77-.02 3.54-.03 5.3-.05-3.96-6.66-7.01-13.94-8.91-21.73-4.26-17.39-2.91-35.79.75-53.15 1.76-8.32 4.2-16.54 7.3-24.51-.24-.2-.46-.43-.68-.68.19.25.36.47.14.2-.36-.46-.72-.92-1.09-1.37-1.34-1.62-2.7-3.22-4.09-4.8-4.61-5.17-9.53-10.07-14.68-14.69-13.86-12.44-29.73-23.07-47.03-30.1-22.95-9.32-46.92-10.75-71.37-7.88-18.93 2.22-37.96 7.37-54.69 16.67-6.27 3.49-11.65 6.7-16.29 11.59-.3.31-.61.57-.93.78-1.06 15.85-2.24 31.69-3.56 47.52-.45 5.4-.9 10.8-1.43 16.2-.29 2.93-.06 6.67-2.29 8.89-2.1 2.08-5.72 2.66-8.48 3.26-4.83 1.05-9.73 1.81-14.62 2.55-12.56 1.9-25.17 3.48-37.78 4.99-.11.18-.2.34-.25.44-.44.87-.8 1.76-1.16 2.66-.99 2.46-1.86 4.98-2.71 7.5-.25.73-.48 1.46-.72 2.19 3.57-.57 7.15-1.12 10.72-1.66 3.6-.54 7.67-1.7 9.98 2.11 2.12 3.49 1.34 9.16 1.2 13.02-.55 15.98-2.34 31.94-4 47.83-.66 6.33-1.35 12.65-2.04 18.98-.39 3.6-.05 7.94-3.83 9.73-3.49 1.65-8.08 1.77-11.84 2.3-2.82.4-5.65.77-8.48 1.14.01.06.01.11.02.17.1.69.2 1.39.31 2.08.29 1.82.62 3.63.99 5.44 4.34 21.29 13.52 41.91 27.31 58.77 11.21 13.72 24.88 24.3 40.04 32.2 1.85.05 3.33.73 4.41 2.21 14.08 6.74 29.32 11.27 44.99 13.92-1.91-6.8-5.96-17.72.78-22.16 3.71-2.44 8.31-3.82 12.47-5.25 6.99-2.41 14.09-4.49 21.2-6.49 16.55-4.66 33.26-8.84 50.06-12.49 6.25-1.36 12.52-2.68 18.85-3.64 3.43-.52 8.49-1.88 11.79-.08 4.09 2.23 5.94 9.14 7.49 13.05 3.48 8.78 6.45 17.76 9.39 26.72.57 1.72 1.12 3.45 1.68 5.18 25.83-9.56 51.49-23.49 72.32-41.44-6.7-7.87-12.58-16.34-17.18-25.23-.89-1.83-.96-4.7.82-6.09Zm-161.42-131.17c8.93-8.76 21.14-11.84 33.34-9.94 16.71 2.61 33.91 15.22 36.35 33.02.43 3.15-1.23 6.33-4.82 6.33h-70.98c-1.84 0-3.15-.82-3.94-1.98-.63-.77-1.03-1.77-1.06-3.02-.2-9.06 4.8-18.22 11.11-24.41Z" style="fill:url(#c);fill-rule:nonzero" transform="translate(-381.72 -582.769)"></path><path d="M2464.57 980.73c1.01.21.75-.21 0 0ZM2565.38 837.28c.02-.04.05-.09.08-.16-.11.05-.13.1-.08.16ZM1287.11 1141.06a.72.72 0 0 1-.12-.21c-.37-.23-1.1-.42.12.21ZM1287.15 1141.08s.01 0 0 0c.05-.06-.02-.14-.13-.21.02.04.05.1.1.19.01.01.02.01.03.02ZM997.75 1193.92v.04c0 .03 0 .07-.01.1 0-.05.01-.1.01-.14 0 0 0 .01 0 0ZM1013.82 1297.37c.07-.07.37.06.47.01.08-.04.19-.06.3-.08-.31-.1-.58-.1-.77.07ZM1286.99 1140.85c.01.01.01.01.02.01-.04-.07-.04-.05-.02-.01ZM1017.85 1299.81c.1 1 .32.12-.03-.15.01.05.03.1.03.15ZM997.76 1193.75c.01-.04.01-.08.01-.11 0 .04 0 .07-.01.11Z" style="fill:#ddd;fill-rule:nonzero" transform="translate(-381.72 -582.769)"></path><path d="M1709.27 1022.85c-2.67-8.42-5.52-16.87-7.56-25.48-.49-2.08-1.25-4.52-.6-6.64 1.17-3.83 5.93-4.99 9.3-6.06.77-.24 1.54-.46 2.32-.7-18.58-7.77-40.84-9.34-60.83-7.93-36.03 2.54-72.17 13.75-97.45 40.52-16.61 17.59-27.99 39.78-34.86 62.86-1.63 5.49-3 11.06-4.05 16.7 1.75.8 2.91 1.49 4.84 2.25 6.23 2.46 12.54 4.73 18.89 6.9 1.79-.3 3.75.26 4.92 1.67 13.19 4.37 26.54 8.29 39.81 12.22 10.79 3.19 21.6 6.3 32.49 9.13 3.87 1.01 7.74 1.99 11.65 2.84 1.07.23 2.15.43 3.22.64 1.05-1.93 2.4-3.71 3.78-5.41 4.32-5.36 9.81-10.36 16.19-13.1 11.76-5.05 28.39 2.54 29.75 15.89 1.62 15.84-7.55 26.88-20.93 33.8-5.16 2.67-13.37 7.61-19.45 5.93-18.37-5.07-36.45-11.67-54.59-17.47-14.45-4.62-28.89-9.25-43.34-13.87-.97 5.85-2.17 11.65-3.52 17.33-6.02 25.4-16.63 50.15-33.64 70.16-2.48 2.91-5.11 5.67-7.86 8.29 5.21 2.01 10.36 4.25 15.53 6.25 14.93 5.78 29.87 11.53 44.83 17.25 37.67 14.41 75.39 28.67 113.31 42.39 15.79 5.71 31.61 11.35 47.56 16.62 8.52 2.81 17.24 6.01 26.11 7.67 2.21-6.14 5.24-12.08 8.04-17.96 8.99-18.91 18.43-37.62 26.99-56.73 3.15-7.03 6.43-14.17 8.55-21.6.26-.9.46-1.8.65-2.71-.14-.08-.29-.16-.46-.26-1.5-.84-3.04-1.59-4.61-2.29-15.13-6.75-31.46-11.34-47.35-15.93-4.9-1.42-4.59-8.1 0-9.64 9.27-3.11 18.54-6.23 27.81-9.34-8.7-25.12-17.35-50.27-25.92-75.44-10.07-29.53-20.1-59.05-29.52-88.75Z" style="fill:#fff;fill-rule:nonzero" transform="translate(-381.72 -582.769)"></path><path d="M2450.19 653.49c-34.59-10.8-69.19-21.57-103.8-32.3-10.82-3.35-21.63-6.71-32.45-10.05-2.32-.72-4.64-1.44-6.96-2.15-.11.36-.24.72-.34 1.08-.75 2.63-1.33 5.3-1.89 7.98-1.59 7.63-2.84 15.34-4.02 23.05-3.03 19.72-5.46 39.54-7.62 59.37-1.72 15.86-3.52 31.81-4.1 47.77-.06 1.68-.04 3.36-.04 5.04 1.46.65 3.12 1.78 4.12 2.2 2.62 1.11 6.09 2.41 9.06 3.5 29.12 10.71 58.93 19.73 88.62 28.7 6.15 1.86 3.52 11.51-2.66 9.64-2.89-.87-5.78-1.76-8.66-2.64-.03.05-.05.1-.08.14-17.82 33.63-35.44 67.4-52.27 101.54-6.5 13.2-13.67 26.52-18.31 40.06 5.9 1.72 11.81 3.44 17.72 5.16 40.78 11.86 81.53 23.83 122.48 35.09 4.08 1.12 8.18 2.16 12.27 3.23.21-.73.43-1.46.57-2.16 3.51-17.44 5.26-35.32 7.34-52.97 3.94-33.41 7.46-66.87 10.75-100.34.08-.84.33-1.57.7-2.19-7.08-1.9-14.15-3.81-21.23-5.72-6.22-1.67-3.56-11.32 2.66-9.64 3.04.82 6.08 1.64 9.12 2.45 31.79 8.55 63.52 17.44 95.46 25.43 2.38-4.84 4.56-9.79 6.76-14.71 7.6-16.96 14.99-34.02 22.33-51.09 7.14-16.62 14.26-33.25 21.1-49.99 1.48-3.63 2.88-7.28 4.3-10.93-19.83-7.03-39.96-13.25-60.01-19.63-36.92-11.78-73.91-23.36-110.92-34.92Z" style="fill:url(#d);fill-rule:nonzero" transform="translate(-381.72 -582.769)"></path><path d="M1789.43 1223.43c-.02 0-.01.05.01.11 0-.06 0-.11-.01-.11ZM2307.95 939.35c-.01.42.12.41 0 0ZM2624.56 709.18c.04.05.08.1.11.14-.04-.05-.07-.1-.11-.14.01 0 .01 0 0 0Z" style="fill:#ddd;fill-rule:nonzero" transform="translate(-381.72 -582.769)"></path><path d="M1531.54 1143.13c1.83-9.45 3.26-19.17 3.6-28.84-6.77-2.26-13.52-4.62-20.1-7.36-5.02-2.08-10.44-3.9-9.7-10.31 1.57-13.47 6.27-27.1 11.69-39.65-.37-.43-.68-.94-.92-1.53-5.55-13.95-13.37-27.05-23.74-37.95-12.87-13.53-29.24-23.27-47.17-28.42-8.13-2.33-15.09-3.87-23.08-3.84-.84 0-1.56-.17-2.18-.46-.94.22-1.88.43-2.82.64-21.09 4.67-42.27 6.71-63.42 6.19-.33.13-.69.24-1.08.31-20.52 3.64-40.15 11.66-55.7 25.8-21.55 19.6-32.85 47.46-37.66 75.7-2.05 12.04-3.22 24.66-2.72 36.99.47.91.58 1.98.16 3.09.07 1.11.15 2.22.25 3.33.04.43.03.82-.02 1.19.15-.03.3-.05.44-.08 7.11-1.28 14.21-2.57 21.3-3.94 3.35-.65 7.27-2.16 10.71-2.21 7.8-.11 10.36 13.78 11.95 19.26 3.89 13.31 6.79 26.94 9.38 40.56 2.42 12.69 4.79 25.59 5.58 38.51.32 5.17.97 12.57-5.21 14.34-.16.05-.33.08-.49.13.35.26.7.53 1.06.78 1.24.9 2.51 1.76 3.8 2.59 7.7 4.95 16.06 8.8 24.76 11.62 27.49 8.91 57.11 7.5 84.77.01 17.93-4.86 36.36-11.56 51.85-22.01 2.66-1.79 5.22-3.73 7.69-5.76.45-.66 1.04-1.19 1.76-1.5 7.36-6.35 13.87-13.7 19.35-21.69 13.43-19.57 21.43-42.33 25.91-65.49Zm-120.66 13.23c-19.22 3.9-46.19-.32-52.01-22.45-.15-.59-.25-1.18-.38-1.78-.05-.21-.08-.38-.12-.54.35 1.67-.69-3.06 0 0v-.01c-.46-2.2-.83-4.41-1.08-6.65-.9-7.86-.31-16.14 2.64-23.53 9.23-23.14 41.84-29.23 62.56-18.56 11.92 6.14 19.4 19.97 19.09 33.31 1.91 19.46-11.96 36.41-30.7 40.21Z" style="fill:#fff;fill-rule:nonzero;stroke:#fff;stroke-width:1" transform="translate(-381.72 -582.769)"></path><path d="M667.34 763.37c-.06-.04-.13-.08-.19-.12.05.04.11.08.19.13.01 0 .01 0 0-.01ZM1867.97 964.67s-.01 0 0 0c-.01.03 0 .05 0 .09.07.39.04.16 0-.09ZM1358.37 1131.59c-.69-3.06.35 1.67 0 0Z" style="fill:#fff;fill-rule:nonzero" transform="translate(-381.72 -582.769)"></path><defs><linearGradient id="a" x1="0" x2="1" y1="0" y2="0" gradientTransform="translate(1515.92 794.445) scale(1105.2)" gradientUnits="userSpaceOnUse"><stop offset="0" style="stop-color:#ffdf9f;stop-opacity:1"></stop><stop offset="0.48" style="stop-color:#f2c096;stop-opacity:1"></stop><stop offset="1" style="stop-color:#cf697c;stop-opacity:1"></stop></linearGradient><linearGradient id="b" x1="0" x2="1" y1="0" y2="0" gradientTransform="translate(1515.92 794.445) scale(1105.2)" gradientUnits="userSpaceOnUse"><stop offset="0" style="stop-color:#ffdf9f;stop-opacity:1"></stop><stop offset="0.48" style="stop-color:#f2c096;stop-opacity:1"></stop><stop offset="1" style="stop-color:#cf697c;stop-opacity:1"></stop></linearGradient><linearGradient id="c" x1="0" x2="1" y1="0" y2="0" gradientTransform="translate(1515.92 794.445) scale(1105.2)" gradientUnits="userSpaceOnUse"><stop offset="0" style="stop-color:#ffdf9f;stop-opacity:1"></stop><stop offset="0.48" style="stop-color:#f2c096;stop-opacity:1"></stop><stop offset="1" style="stop-color:#cf697c;stop-opacity:1"></stop></linearGradient><linearGradient id="d" x1="0" x2="1" y1="0" y2="0" gradientTransform="translate(1515.92 794.445) scale(1105.2)" gradientUnits="userSpaceOnUse"><stop offset="0" style="stop-color:#ffdf9f;stop-opacity:1"></stop><stop offset="0.48" style="stop-color:#f2c096;stop-opacity:1"></stop><stop offset="1" style="stop-color:#cf697c;stop-opacity:1"></stop></linearGradient></defs></svg>`
                        }}>
                        </h1>
                        <h2 className="text-center text-3xl font-semibold text-white">
              <span
                  className="bg-gradient-to-r from-yellow-300 to-orange-400 bg-clip-text text-4xl font-bold text-transparent">
                Класация
              </span>{" "}
                            на{" "}
                            <span className="text-4xl font-extrabold">
                You<span className="text-red-500">Tube</span>
              </span>{" "}
                            видеата
                        </h2>
                        <p className="flex justify-center gap-1 text-white">
                            {videos.isFetching ? (
                                <span className="animate-pulse">Обновява се...</span>
                            ) : (
                                <>
                                    <IconRefresh width="1em"/>{" "}
                                    <span>
                    Последно обновено{" "}
                                        <RelativeDate date={new Date(videos.dataUpdatedAt)}/>.
                  </span>
                                </>
                            )}
                        </p>
                    </header>
                    <SortByRadio value={sortBy} onChange={setSortBy}/>
                    <div
                        ref={animationParent}
                        className="flex w-full max-w-lg flex-col items-center gap-4"
                    >
                        {sortedVideos?.map((video) => (
                            <Link
                                key={video.id}
                                id={video.isFirstInRank ? `${video.rank}` : undefined}
                                className={classNames(
                                    "flex w-full flex-col items-center gap-4 rounded-xl p-4 shadow-sm transition-all hover:scale-105 sm:flex-row",
                                    {
                                        "border-8": video.rank < 4,
                                        "border ": video.rank >= 4,
                                        "text-black": video.rank <= 3,
                                        "text-white": video.rank > 3,
                                        "border-yellow-500 bg-yellow-300 hover:bg-yellow-200":
                                            video.rank === 1,
                                        "border-amber-600 bg-amber-500 hover:bg-amber-400":
                                            video.rank === 3,
                                        "border-gray-500 bg-gray-400 hover:bg-gray-300":
                                            video.rank === 2,
                                        "border-gray-700 bg-white/10 hover:bg-white/20":
                                            video.rank >= 4,
                                        "mt-8": video.rank === 4 && video.isFirstInRank,
                                    }
                                )}
                                href={`https://www.youtube.com/watch?v=${video.id}`}
                                target="_blank"
                                rel="noopener nofollow"
                            >
                <span className="relative grid aspect-video w-full place-items-center bg-black sm:w-36 ">
                  <YtThumbnail id={video.id} title={video.title}/>
                  <span
                      className="z-10 flex h-16 w-16 items-center justify-center rounded-full bg-[#68cbe9] p-3 text-2xl font-semibold text-black">
                    #{video.rank}
                  </span>
                </span>
                                <span
                                    className="flex flex-col items-center justify-center text-center sm:w-auto sm:items-start sm:justify-start sm:text-left">
                  <span className="overflow-hidden text-2xl font-bold">
                    {shortenNameLength(video.title)}
                  </span>
                  <span className="flex gap-4 text-xl font-semibold">
                    <span className="flex items-center gap-2">
                      <IconEye width="1em"/>
                      <span>{video.views}</span>
                    </span>
                    <span className="flex items-center gap-2">
                      <IconThumbUpFilled width="1em"/>
                      <span>{video.likes}</span>
                    </span>
                    <span className="flex items-center gap-2">
                      <IconThumbDownFilled width="1em"/>
                      <span>{video.dislikes}</span>
                    </span>
                  </span>
                </span>
                            </Link>
                        ))}
                    </div>
                    <footer className="flex flex-row items-center gap-5">
                        <Link
                            href="https://tuesfest.bg"
                            target="_blank"
                            rel="noopener nofollow"
                            className="flex cursor-pointer gap-1 text-lg text-white transition-transform hover:scale-110 hover:underline"
                        >
                            <IconExternalLink width="1em"/> TUES Fest 2024
                        </Link>
                        <Link
                            href="https://github.com/KokosTech/tf23-yt-leaderboards"
                            target="_blank"
                            rel="noopener nofollow"
                            className="flex cursor-pointer gap-1 text-lg text-white transition-transform hover:scale-110 hover:underline"
                        >
                            <IconBrandGithubFilled width="1em"/>
                            GitHub
                        </Link>
                    </footer>
                </div>
            </main>
        </>
    );
};

export async function getStaticProps() {
    const helpers = createServerSideHelpers({
        router: appRouter,
        ctx: {},
        transformer: SuperJSON,
    });

    await helpers.videos.get.prefetch();

    return {
        props: {
            trpcState: helpers.dehydrate(),
        },
        revalidate: 60,
    };
}

export default Home;
